'use client';

import { motion, AnimatePresence } from 'motion/react';
import { useEffect, useState } from 'react';
import { Transition } from 'motion';

export default function BackgroundDecor() {
  return (
    <div style={layer}>
      <Circle
        width={520}
        fill="#85B0D22E"
        className="absolute bottom-12 right-10"
      />
      <Circle
        width={15}
        fill="#85B0D2"
        className="absolute bottom-12 right-10 lg:bottom-44 lg:right-96"
      />
      <Cube width={72} className="absolute top-0  right-3 lg:top-16 lg:right-80" />
      <Circle
        width={110}
        fill="#F3442C"
        className="absolute top-10 right-[90%] lg:top-10 lg:right-24"
      />
      <Circle
        width={25}
        fill="#F3442C"
        className="absolute top-[40%] right-3 lg:top-[20%] lg:right-[45%]"
      />
      <Circle
        width={25}
        fill="#F3442C"
        className="absolute top-[90%] right-[90%]  lg:top-[55%] lg:right-0"
      />
      <Zip className="absolute right-56 bottom-60 lg:bottom-12 lg:right-[450px]" />
      <ComputerScreen className="absolute w-56 lg:w-[400px] top-[55%] s: right-[100px]  lg:top-40 lg:right-44" />
      <ChatCloud className="absolute right-0 top-[45%] lg:top-64 lg:right-5" />
      <Assistant className="absolute lg:bottom-4 lg:right-8 bottom-0 right-0 w-[176px] lg:w-80" />
      <Box width={15} height={15} className="absolute top-[95%] right-52 lg:top-32 lg:right-0" />
      <Box
        width={20}
        height={20}
        className="absolute bottom-60 right-3 lg:bottom-12 lg:right-0"
      />
    </div>
  );
}

const layer: React.CSSProperties = {
  position: 'absolute',
  top: 0,
  left: 0,
  right: 25,
  bottom: 0,
};

function ChatCloud({ className }: { className?: string }) {
  const bounceTransition: Transition = {
    repeat: Infinity,
    repeatType: 'loop',
    duration: 2,
    ease: 'easeInOut',
  };

  return (
    <svg
      className={className}
      width="131"
      height="107"
      viewBox="0 0 131 107"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M35.6895 1.37131H94.3666C113.419 1.37131 128.758 16.7189 128.758 35.783V41.0019C128.758 60.066 113.419 75.4135 94.3666 75.4135L62.0282 75.9321L36.1784 104.77L35.6898 75.4136C18.0292 75.4136 1.29834 60.066 1.29834 41.0019V35.7831C1.29834 16.719 16.6367 1.37131 35.6895 1.37131Z"
        fill="#FEFEF9"
        stroke="#111818"
        strokeWidth="2.51339"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
      {[0, 1, 2].map((i) => (
        <motion.circle
          key={i}
          cx={40 + i * 25}
          cy={40}
          r={5}
          fill="black"
          animate={{ y: ['0%', '-10%', '0%'] }}
          transition={{ ...bounceTransition, delay: i * 0.2 }}
        />
      ))}
    </svg>
  );
}
function Assistant({ className }: { className?: string }) {
  return (
    <svg
      width="320"
      height="360"
      viewBox="0 0 343 449"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className={className}
    >
      <path
        d="M99.7792 231.523C99.7792 231.523 66.3658 233.48 51.6965 218.802C37.0272 204.125 39.146 189.936 41.9169 183.902C44.6878 177.867 56.9123 159.112 59.5201 136.116C62.128 113.121 55.4453 48.2117 85.2729 28.478C115.1 8.74425 140.853 -0.388707 159.923 1.07909C178.994 2.54689 196.163 13.1899 197.719 14.3431C199.275 15.4963 213.566 16.1882 222.383 23.2228C231.2 30.2574 238.975 41.6882 241.909 49.8426C244.842 57.997 256.252 101.705 258.86 108.718C261.468 115.73 269.454 134.16 275.811 144.108C282.168 154.056 293.251 188.142 283.961 203.798C274.67 219.455 266.684 225.815 253.155 229.403C239.627 232.991 180.949 277.351 180.949 277.351L109.559 263L99.7792 231.523Z"
        fill="#111818"
      />
      <path
        d="M20.728 301.652C32.8857 256.051 71.3088 239.159 113.797 228.099C113.797 228.099 107.347 236.163 110.374 244.571C119.683 270.426 161.842 275.923 186.573 267.158C207.988 259.569 216.4 248.24 221.535 241.309C225.897 235.42 227.565 229.077 227.565 228.262C227.565 227.446 233.559 229.957 240.931 230.3C244.435 230.463 250.279 229.84 252.036 229.711C253.72 229.586 304.049 243.225 320.592 283.997C341.676 324.622 349.312 416.873 335.466 447.616L160.277 449C85.8409 449 37.8284 448.34 0.876831 448.34C2.25716 362.907 20.728 301.652 20.728 301.652Z"
        fill="#F3442C"
      />
      <path
        d="M164.007 265.282C191.558 264.295 214.219 249.056 221.634 227.341C221.634 227.341 209.129 221.345 204.864 213.56C199.402 203.588 199.482 199.911 198.814 190.554C198.814 190.554 188.441 204.104 176.685 210.389C164.863 216.709 156.113 219.269 145.682 219.499C135.306 219.729 126.723 218.923 126.723 218.923C126.723 218.923 125.225 225.669 121.249 229.014C117.272 232.358 114.103 237.49 116.12 242.852C123.168 261.592 150.188 264.864 164.007 265.282Z"
        fill="#FEFEF9"
      />
      <path
        d="M148.025 213.094C148.025 213.094 97.4164 221.292 86.2508 159.438C81.9315 102.928 84.3376 98.4978 84.6867 90.0517C85.0357 81.6056 85.5928 77.988 85.9252 73.1643C93.5734 69.0292 104.767 64.9114 114.564 62.086C124.381 59.2548 147.987 53.437 156.516 49.6314C165.045 45.8258 170.807 42.4814 170.807 42.4814C170.807 42.4814 173.939 56.1709 183.044 72.2005C192.149 88.2301 201.004 100.834 206.305 105.101C211.607 109.368 212.774 110.247 215.382 110.104C217.99 109.961 224.119 107.369 229.379 111.796C234.031 115.712 237.264 122.458 234.126 130.408C227.623 146.887 212.203 146.131 211.837 146.799C211.145 148.063 203.198 182.026 186.166 196.296C169.133 210.567 163.347 210.579 148.025 213.094Z"
        fill="#FEFEF9"
      />
      <path
        d="M106.438 122.63C111.649 122.235 112.308 115.844 111.625 111.847C110.941 107.85 109.781 102.794 103.96 102.852C98.14 102.909 98.6585 109.598 98.9468 112.712C99.2352 115.826 101.228 123.024 106.438 122.63Z"
        fill="#111818"
      />
      <path
        d="M162.436 122.916C167.646 122.521 168.305 116.13 167.622 112.133C166.939 108.136 165.778 103.08 159.958 103.138C154.138 103.195 154.656 109.884 154.944 112.998C155.233 116.112 157.226 123.311 162.436 122.916Z"
        fill="#111818"
      />
      <path
        d="M131.967 108.791C131.967 108.791 122.28 133.048 120.321 137.43C118.361 141.812 115.752 145.962 117.161 148.062C118.923 150.689 124.258 153.192 134.114 150.91"
        stroke="#111818"
        strokeWidth="2.51339"
        strokeLinecap="round"
      />
      <path
        d="M119.501 173.138C119.501 173.138 129.805 178.347 138.674 177.656C147.543 176.966 156.867 171.874 156.867 171.874"
        stroke="#111818"
        strokeWidth="2.51339"
        strokeLinecap="round"
      />
      <path
        d="M91.5482 90.3702C91.5482 90.3702 95.7419 84.312 103.273 83.3584C110.804 82.4048 118.034 85.559 118.034 85.559"
        stroke="#111818"
        strokeWidth="2.51339"
        strokeLinecap="round"
      />
      <path
        d="M153.648 85.4775C153.648 85.4775 161.879 80.8846 169.579 83.3602C177.278 85.8358 180.671 92.3994 180.623 92.4088"
        stroke="#111818"
        strokeWidth="2.51339"
        strokeLinecap="round"
      />
      <path
        d="M251.222 316.983C249.587 317.386 248.588 319.04 248.991 320.676C248.991 320.676 260.815 368.825 264.112 392.866C266.563 410.741 267.719 448.136 267.719 448.136L273.862 448.072C273.862 448.072 272.725 410.764 270.157 392.04C266.744 367.15 254.912 319.215 254.912 319.215C254.509 317.579 252.857 316.58 251.222 316.983Z"
        fill="#111818"
      />
      <path
        d="M213.385 127.147C213.909 126.847 213.652 120.891 216.22 118.239C219.248 115.111 224.632 116.546 224.632 116.546"
        stroke="#111818"
        strokeWidth="2.13543"
        strokeLinecap="round"
      />
      <path
        d="M64.7163 320.634C63.0394 320.487 61.56 321.726 61.4111 323.404C61.4111 323.404 55.3182 389.504 61.8885 448.67C64.3283 448.67 64.9073 448.705 68.0497 448.705C61.5799 390.447 67.4842 323.938 67.4842 323.938C67.6316 322.26 66.393 320.783 64.7163 320.634Z"
        fill="#111818"
      />
    </svg>
  );
}

function Circle({
  className,
  width,
  fill,
}: {
  className?: string;
  width: number;
  fill: string;
}) {
  return (
    <svg
      width={width}
      height={width}
      className={className}
      viewBox={`0 0 ${width} ${width}`}
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle cx={width / 2} cy={width / 2} r={width / 2} fill={fill} />
    </svg>
  );
}

type Line = {
  width: number;
  color: string;
};

function ComputerScreen({ className }: { className?: string }) {
  const [lines, setLines] = useState<Line[]>([]);

  useEffect(() => {
    const interval = setInterval(() => {
      setLines((prev) => {
        const newLine = {
          width: 80 + Math.floor(Math.random() * 160),
          color: Math.random() > 0.5 ? '#F3442C' : '#85B0D2',
        };
        const next = [...prev, newLine];
        return next.length > 7 ? next.slice(1) : next;
      });
    }, 2500);

    return () => clearInterval(interval);
  }, []);

  return (
    <svg
      width="395"
      height="285"
      viewBox="0 0 399 290"
      fill="none"
      className={className}
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M377.61 2.46191H20.983C10.3609 2.46191 1.74994 11.0779 1.74994 21.7064V268.297C1.74994 278.925 10.3609 287.541 20.983 287.541H377.61C388.233 287.541 396.844 278.925 396.844 268.297V21.7064C396.844 11.0779 388.233 2.46191 377.61 2.46191Z"
        className="fill-white dark:fill-black"
        fill="#FEFEF9"
        stroke="#111818"
        strokeWidth="3.26929"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
      <path
        d="M366.201 29.8608H33.6964C31.896 29.8608 30.4365 31.3212 30.4365 33.1226V253.618C30.4365 255.42 31.896 256.88 33.6964 256.88H366.201C368.001 256.88 369.461 255.42 369.461 253.618V33.1226C369.461 31.3212 368.001 29.8608 366.201 29.8608Z"
        className="fill-white dark:fill-background"
        stroke="#111818"
        strokeWidth="3.26929"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
      {lines.map((line, i) => (
        <motion.rect
          key={i}
          x="60"
          y={230 - (lines.length - i) * 24}
          rx="4"
          height="6"
          width={line.width}
          fill={line.color}
          initial={{ opacity: 0, y: 10 }}
          animate={{ opacity: 1, y: 0 }}
          exit={{ opacity: 0, y: -10 }}
          transition={{ duration: 0.4 }}
        />
      ))}
    </svg>
  );
}

function Box({
  className,
  width,
  height,
}: {
  className?: string;
  width: number;
  height: number;
}) {
  return (
    <svg
      className={className}
      width={width}
      height={height}
      viewBox="0 0 17 17"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M8.2928 16.7156L16.1181 8.98479C16.4639 8.64323 16.4675 8.08596 16.1261 7.74001L9.63608 1.16284C9.29472 0.816893 8.73762 0.813258 8.39188 1.15483L0.566567 8.88559C0.220823 9.22716 0.217354 9.78458 0.558719 10.1305L7.04875 16.7077C7.39012 17.0536 7.94706 17.0571 8.2928 16.7156Z"
        fill="#111818"
      />
    </svg>
  );
}

function Cube({ className, width }: { className?: string; width: number }) {
  return (
    <svg
      className={className}
      width={width}
      height={width}
      viewBox="0 0 73 71"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M71.7283 0.020752H1.64156C1.10145 0.020752 0.663574 0.458882 0.663574 0.999311V69.9858C0.663574 70.5263 1.10145 70.9644 1.64156 70.9644H71.7283C72.2684 70.9644 72.7062 70.5263 72.7062 69.9858V0.999311C72.7062 0.458882 72.2684 0.020752 71.7283 0.020752Z"
        fill="#111818"
      />
      <path
        d="M17.1257 21.2223C19.4662 21.2223 21.3636 19.3238 21.3636 16.982C21.3636 14.6401 19.4662 12.7417 17.1257 12.7417C14.7853 12.7417 12.8879 14.6401 12.8879 16.982C12.8879 19.3238 14.7853 21.2223 17.1257 21.2223Z"
        fill="#FEFEF9"
      />
      <path
        d="M17.1257 39.8144C19.4662 39.8144 21.3636 37.9159 21.3636 35.5741C21.3636 33.2322 19.4662 31.3338 17.1257 31.3338C14.7853 31.3338 12.8879 33.2322 12.8879 35.5741C12.8879 37.9159 14.7853 39.8144 17.1257 39.8144Z"
        fill="#FEFEF9"
      />
      <path
        d="M17.1257 57.5911C19.4662 57.5911 21.3636 55.6926 21.3636 53.3508C21.3636 51.0089 19.4662 49.1104 17.1257 49.1104C14.7853 49.1104 12.8879 51.0089 12.8879 53.3508C12.8879 55.6926 14.7853 57.5911 17.1257 57.5911Z"
        fill="#FEFEF9"
      />
      <path
        d="M36.1958 21.2223C38.5363 21.2223 40.4336 19.3238 40.4336 16.982C40.4336 14.6401 38.5363 12.7417 36.1958 12.7417C33.8553 12.7417 31.958 14.6401 31.958 16.982C31.958 19.3238 33.8553 21.2223 36.1958 21.2223Z"
        fill="#FEFEF9"
      />
      <path
        d="M36.1958 39.8144C38.5363 39.8144 40.4336 37.9159 40.4336 35.5741C40.4336 33.2322 38.5363 31.3338 36.1958 31.3338C33.8553 31.3338 31.958 33.2322 31.958 35.5741C31.958 37.9159 33.8553 39.8144 36.1958 39.8144Z"
        fill="#FEFEF9"
      />
      <path
        d="M36.1958 57.5911C38.5363 57.5911 40.4336 55.6926 40.4336 53.3508C40.4336 51.0089 38.5363 49.1104 36.1958 49.1104C33.8553 49.1104 31.958 51.0089 31.958 53.3508C31.958 55.6926 33.8553 57.5911 36.1958 57.5911Z"
        fill="#FEFEF9"
      />
      <path
        d="M55.1029 21.2223C57.4434 21.2223 59.3407 19.3238 59.3407 16.982C59.3407 14.6401 57.4434 12.7417 55.1029 12.7417C52.7624 12.7417 50.8651 14.6401 50.8651 16.982C50.8651 19.3238 52.7624 21.2223 55.1029 21.2223Z"
        fill="#FEFEF9"
      />
      <path
        d="M55.1029 39.8144C57.4434 39.8144 59.3407 37.9159 59.3407 35.5741C59.3407 33.2322 57.4434 31.3338 55.1029 31.3338C52.7624 31.3338 50.8651 33.2322 50.8651 35.5741C50.8651 37.9159 52.7624 39.8144 55.1029 39.8144Z"
        fill="#FEFEF9"
      />
      <path
        d="M55.1029 57.5911C57.4434 57.5911 59.3407 55.6926 59.3407 53.3508C59.3407 51.0089 57.4434 49.1104 55.1029 49.1104C52.7624 49.1104 50.8651 51.0089 50.8651 53.3508C50.8651 55.6926 52.7624 57.5911 55.1029 57.5911Z"
        fill="#FEFEF9"
      />
    </svg>
  );
}

function Zip({ className }: { className?: string }) {
  return (
    <svg
      width="156"
      height="94"
      className={className}
      viewBox="0 0 156 94"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M1.69598 92.258L48.7193 45.207C50.5826 43.3426 54.7611 43.3426 56.6244 45.207C65.3904 53.9782 72.0889 60.6805 80.0546 68.651C81.6777 70.2751 85.3179 70.2751 86.941 68.651C107.177 48.4028 153.707 1.84576 153.707 1.84576"
        stroke="#111818"
        strokeWidth="3.26929"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
    </svg>
  );
}
